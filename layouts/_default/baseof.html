<!DOCTYPE html>
{{- $p := .Page -}}
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ .Title }}</title>
  {{- $options := (dict "targetPath" "style.css" "outputStyle" "compressed" "enableSourceMap" false) -}}
  {{- $style := resources.Get "style.scss" | resources.ExecuteAsTemplate "main.scss" . | resources.ToCSS $options | resources.Fingerprint "md5" -}}
  <link rel="stylesheet" href="{{ $style.RelPermalink }}" type="text/css" media="all">
  <meta property="og:title" content="{{ .Page.Title }}">
  <meta property="og:site_name" content="Ayton Primary School">
  {{ with .Params.description -}}
    <meta property="og:description" content="{{ . }}">
  {{ else }}
    <meta property="og:description" content="{{ .Summary }}">
  {{- end }}
  <meta property="og:type" content="article">
  <meta property="og:updated_time" content="{{ .Page.Lastmod.Unix }}">
  <meta property="og:locale" content="en_GB">
  {{ with .Params.og -}}
    <meta property="og:image" itemprop="image" content="{{ (resources.GetMatch .).Permalink }}">
  {{- else -}}
    {{ with .Params.cover_photo -}}
      <meta property="og:image" itemprop="image" content="{{ (resources.GetMatch .).Permalink }}">
    {{- end }}
  {{- end }}
  {{ block "head_extra" . -}}
  {{- end }}
</head>
<body>
  <div id="site">
    <header id="header">
      <a href="/"><img class="logo" src="{{ (resources.Get "/i/logo.svg").RelPermalink }}"></a>
      <a href="/blog" class="blog-link">P7 blog</a>
      <ul class="contact">
        {{ range .Site.Data.contact.quick -}}
          <li><a href="{{ .link | safeURL }}" title="{{ .title }}" {{ if strings.HasPrefix .link "http" }} target="_blank" rel="noopener"{{ end }}><img src="{{ (resources.GetMatch .icon).RelPermalink }}"></a></li>
        {{- end }}
      </ul>
    </header>
    <main>
      <article>
        {{ block "main" . }}
          <h1>{{ .Title }}</h1>
          {{ with .Params.cover_photo }}
            <div class="cover-photo"><img src="{{ (resources.GetMatch .).RelPermalink }}"></div>
          {{ end }}
          {{ .Content }}
        {{ end }}
      </article>
    </main>
    <footer id="footer">
      <ul class="contact">
        {{ range .Site.Data.contact.details -}}
          <li>
            <div class="icon"><img src="{{ (resources.GetMatch .icon).RelPermalink }}" alt="{{ .title }}"></div>
            <div class="text">{{ $p.RenderString .content }}</div>
          </li>
        {{- end }}
      </ul>
    </footer>
  </div>
</body>
</html>
